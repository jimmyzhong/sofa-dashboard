<!DOCTYPE html>
<html lang="zh" xmlns:th="http://www.thymeleaf.org" xmlns:shiro="http://www.pollix.at/thymeleaf/shiro">
<head>
    <th:block th:include="include :: header('用户订单明细')"/>
</head>
<body class="gray-bg">
<div class="container-div">
    <div class="row">
        <div class="col-sm-12 select-table table-striped">
            <table id="bootstrap-table" data-mobile-responsive="true"></table>
        </div>
        <input id="userId" name="userId" th:value="${userId}" type="hidden">
    </div>
</div>
<th:block th:include="include :: footer"/>
<script th:inline="javascript">
    var detailFlag = [[${@permission.hasPermi('ext:shop:user:view')}]];
    var editFlag = [[${@permission.hasPermi('ext:shop:user:edit')}]];
    var removeFlag = [[${@permission.hasPermi('ext:shop:user:remove')}]];
    var prefix = ctx + "ext/shop/order";
    var statusMap = {
        0: "待付款",
        1: "已支付",
        2: "未支付",
        3: "确认收货",
        4: "用户取消",
        5: "待发货",
        6: "已发货",
        7: "已申请寄售",
        8: "已完成",
        9: "已退保证金",
        10: "等待付尾款",
        "-1": "无效订单"
    };
    var payTypeMap={
        0: "支付宝",
        1: "微信",
        2: "刷卡",
        3:"余额",
        4:"积分",
    }
    $(function () {
        var _orderOptions = {
            url: prefix + "/list?userId=" + $("#userId").val(),
            detailUrl: prefix + "/detail/{id}",
            createUrl: prefix + "/add",
            updateUrl: prefix + "/edit/{id}",
            removeUrl: prefix + "/remove",
            showSearch: false,
            showRefresh: false,
            showToggle: false,
            showColumns: false,
            sortName: "id",
            sortOrder: "asc",
            modalName: "订单列表",
            columns: [{
                checkbox: true
            },
                {
                    field: 'id',
                    title: 'id',
                    sortable: true
                },
                {
                    field: 'orderSn',
                    title: '订单号',
                    sortable: true
                },
                {
                    field: 'receiverName',
                    title: '用户',
                },
                {
                    field: 'totalAmount',
                    title: '订单金额'
                },
                {
                    field: 'payAmount',
                    title: '支付金额'
                },
                {
                    field: 'updateTime',
                    title: '更新时间'
                },
                {
                    field: 'payType',
                    title: '支付方式',
                    align: 'center',
                    formatter: function (value, row, index) {
                        return payTypeMap[value] || "不详";
                    }
                },
                {
                    field: 'status',
                    title: '订单状态',
                    align: 'center',
                    formatter: function (value, row, index) {
                        return statusMap[value] || "不详";
                    }
                }
            ]
        };
        $.table.init(_orderOptions);
    });
</script>
</body>
</html>