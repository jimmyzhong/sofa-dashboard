<!DOCTYPE html>
<html lang="zh" xmlns:th="http://www.thymeleaf.org" xmlns:shiro="http://www.pollix.at/thymeleaf/shiro">
<head>
    <th:block th:include="include :: header('用户订单明细')"/>
</head>
<body class="gray-bg">
<div class="container-div">
    <div class="row">
        <div class="col-sm-12 select-table table-striped">
            <table id="bootstrap-table" data-mobile-responsive="true"></table>
        </div>
        <input id="userId" name="userId" th:value="${userId}" type="hidden">
    </div>
</div>
<th:block th:include="include :: footer"/>
<script th:inline="javascript">
    var detailFlag = [[${@permission.hasPermi('ext:shop:user:view')}]];
    var editFlag = [[${@permission.hasPermi('ext:shop:user:edit')}]];
    var removeFlag = [[${@permission.hasPermi('ext:shop:user:remove')}]];
    var prefix = ctx + "ext/shop/user";
    $(function () {
        var _orderOptions = {
            url: prefix + "/orderList?userId=" + $("#userId").val(),
            detailUrl: prefix + "/detail/{id}",
            createUrl: prefix + "/add",
            updateUrl: prefix + "/edit/{id}",
            removeUrl: prefix + "/remove",
            showSearch: false,
            showRefresh: false,
            showToggle: false,
            showColumns: false,
            sortName: "id",
            sortOrder: "asc",
            modalName: "订单列表",
            columns: [{
                checkbox: true
            },
                {
                    field: 'id',
                    title: 'id',
                    sortable: true
                },
                {
                    field: 'nickName',
                    title: '用户',
                    formatter: function (value, row, index) {
                        return $.table.imageView(value, 300, 300);
                    }
                },
                {
                    field: 'totalAmount',
                    title: '订单总金额',
                    sortable: true
                },
                {
                    field: 'payAmount',
                    title: '应付金额'
                }, {
                    field: 'freightAmount',
                    title: '运费金额'
                },
                {
                    field: 'promotionPrice',
                    title: '优惠价'
                },
                {
                    field: 'payType',
                    title: '支付方式',
                    align: 'center',
                    formatter: function (value, row, index) {
                        return {1: "支付宝", 2: "微信"}[value] || "不详";
                    }
                }
            ]
        };
        $.table.init(_orderOptions);
    });
</script>
</body>
</html>