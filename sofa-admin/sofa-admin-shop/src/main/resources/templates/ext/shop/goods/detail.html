<!DOCTYPE html>
<html lang="zh" xmlns:th="http://www.thymeleaf.org" >
<head>
	<th:block th:include="include :: header('查看商品详情')" />
	<th:block th:include="include :: summernote-css" />
</head>
<body class="white-bg">
	<div class="wrapper wrapper-content animated fadeInRight ibox-content">
		<form class="form-horizontal m" id="form-shop-goods-edit">
			<input id="id" name="id" type="hidden" th:value="${goods.id}"/>
			<div class="form-group">
				<label class="col-sm-3 control-label">标题：</label>
				<div class="col-sm-8">
					<p type="text" name="productName" id="productName" th:text="${goods.productName}"></p>
				</div>
			</div>
			<div class="form-group tc">
				<label class="col-sm-3 control-label">封面图：</label>
				<div class="col-sm-8">
					<img id="productPic_img" class="img-circle img-lg" th:src="${goods.productPic}">
				</div>
			</div>
			<div class="form-group">
				<label class="col-sm-3 control-label">价格：</label>
				<div class="col-sm-8">
					<p type="text" name="price" id="price" th:text="${goods.price}"></p>
				</div>
			</div>
			<div class="form-group">
				<label class="col-sm-3 control-label is-required">折扣价：</label>
				<div class="col-sm-8">
					<p th:text="${goods.promotionPrice}"></p>
				</div>
			</div>
			<div class="form-group">
				<label class="col-sm-3 control-label is-required">库存：</label>
				<div class="col-sm-8">
					<p th:text="${goods.stock}"></p>
				</div>
			</div>
			<div class="form-group">
				<label class="col-sm-3 control-label">类别：</label>
				<div class="col-sm-8">
					<p id="category_name"></p>
				</div>
			</div>
			<div class="form-group">
				<label class="col-sm-3 control-label">子类别：</label>
				<div class="col-sm-8">
					<p id="subCategory_name"></p>
				</div>
			</div>
			<div class="form-group">
				<label class="col-sm-3 control-label">商品描述：</label>
				<div class="col-sm-8">
					<div th:text="${goods.description}">

					</div>
				</div>
			</div>
			<div class="form-group">
				<label class="col-sm-3 control-label">商品详情：</label>
				<div class="col-sm-8">
					<input id="detail_desc" name="detail_desc" th:value="${goods.detailDesc}" type="hidden">
					<div id="detail_desc_contain"></div>
				</div>
			</div>
			<div class="form-group">
				<label class="col-sm-3 control-label"></label>
				<div class="col-sm-8">
					<button type="button" class="btn btn-w-m btn-primary" onclick="$.modal.closeTab();">返回</button>
					<button type="button" class="btn btn-w-m btn-primary" onclick="gotoEdit()">修改</button>
				</div>
			</div>
		</form>
		<input id="category" type="hidden" th:value="${goods.productCategoryId}"/>
		<input id="subCategory" type="hidden" th:value="${goods.productCategorySecondaryId}"/>
	</div>
	<style>
		#detail_desc_contain img{
			width: 100% !important;
		}
	</style>
	<th:block th:include="include :: footer" />
	<th:block th:include="include :: summernote-js" />
	<script type="text/javascript" th:inline="javascript">

		var prefix = ctx + "ext/shop/goods";
        var _categoryAll=[];
		$(function () {
			var content = $("#detail_desc").val();
			$("#detail_desc_contain").html(content);
			var category=$("#category").val();
			var subCategory=$("#subCategory").val();
			if(category){
				$.ajax({
					url: ctx + "ext/shop/category/detail/"+category,
					type: "post",
					success: function (result){
						$("#category_name").text(result.data.name)
					}
				})
			}
			if(subCategory){
				$.ajax({
					url: ctx + "ext/shop/category/detail/"+subCategory,
					type: "post",
					success: function (result){
						$("#subCategory_name").text(result.data.name)
					}
				})
			}
		});
		function gotoEdit() {
			var url = prefix + '/edit/' + $("#id").val();
			$.modal.openTab("编辑商品", url);
		}
	</script>
</body>
</html>
